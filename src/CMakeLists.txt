cmake_minimum_required(VERSION 3.16)

set(INI_PARSER_NAME configParser)
add_project(LIBRARY STATIC TARGET ${INI_PARSER_NAME} DIRECTORY ${CMAKE_CURRENT_LIST_DIR}/ConfigParser)

set(ARG_PARSER_NAME argParser)
add_project(LIBRARY STATIC TARGET ${ARG_PARSER_NAME} DIRECTORY ${CMAKE_CURRENT_LIST_DIR}/ArgParser)

set(CMAKE_GENERATOR_NAME cmakeGenerator)
add_project(LIBRARY STATIC TARGET ${CMAKE_GENERATOR_NAME} DIRECTORY ${CMAKE_CURRENT_LIST_DIR}/CMakeGenerator LINK ${INI_PARSER_NAME})

set(FILE_OPERATIONS_NAME fileOperations)
add_project(LIBRARY STATIC TARGET ${FILE_OPERATIONS_NAME} DIRECTORY ${CMAKE_CURRENT_LIST_DIR}/FileOperations)

set(CONVERTER_APP_NAME app)
add_project(EXECUTABLE TARGET ${CONVERTER_APP_NAME} DIRECTORY ${CMAKE_CURRENT_LIST_DIR}/app LINK ${INI_PARSER_NAME} ${ARG_PARSER_NAME} ${CMAKE_GENERATOR_NAME} ${FILE_OPERATIONS_NAME})

set(TESTS_NAME tests)
add_project(EXECUTABLE TARGET ${TESTS_NAME} DIRECTORY ${CMAKE_CURRENT_LIST_DIR}/tests LINK ${INI_PARSER_NAME} ${ARG_PARSER_NAME} ${CMAKE_GENERATOR_NAME} ${FILE_OPERATIONS_NAME} gtest gtest_main gmock gmock_main)
add_test(NAME ${TESTS_NAME} COMMAND ${TESTS_NAME})